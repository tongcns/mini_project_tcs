{"ast":null,"code":"var _jsxFileName = \"/Users/chanasornsringoen/Desktop/CSC105/Assignment/Project/thaithai/src/pages/Login.jsx\";\nimport React, { Component } from 'react';\nimport './Login.css';\nimport axios from \"axios\";\nimport { Form, Icon, Input, Button, Checkbox, message } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormItem = Form.Item;\nclass NormalLoginForm extends Component {\n  constructor() {\n    super(...arguments);\n    this.isLoggedIn = () => {\n      // window.loggedUsername should be defined by UI page / jelly script\n      // if it's 'guest' that means there is no active user session\n      if (window.loggedUsername === 'guest') {\n        return false;\n      } else {\n        return true; // set it to false for local development to prevent passing through\n      }\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          var details = {\n            sysparm_type: \"login\",\n            \"ni.nolog.user_password\": true,\n            remember_me: values.remember,\n            user_name: values.userName,\n            user_password: values.password,\n            get_redirect_url: true,\n            sysparm_goto_url: \"navpage.do\"\n          };\n          var formBody = [];\n          for (var property in details) {\n            var encodedKey = encodeURIComponent(property);\n            var encodedValue = encodeURIComponent(details[property]);\n            formBody.push(encodedKey + \"=\" + encodedValue);\n          }\n          formBody = formBody.join(\"&\");\n          axios({\n            method: \"post\",\n            url: \"angular.do?sysparm_type=view_form.login\",\n            data: formBody,\n            config: {\n              headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n              }\n            }\n          }).then(function (response) {\n            if (response.data.status === 'error') {\n              message.error(response.data.message);\n            } else if (response.data.status === 'success') {\n              message.success(response.data.message);\n              setTimeout(() => {\n                window.location = window.mainAppPage;\n              }, 500);\n            } else {\n              message.warning('Unknown response status' + response.data.message);\n            }\n          }).catch(function (response) {\n            message.error('Network error. Cannot log in.');\n          });\n        }\n      });\n    };\n  }\n  render() {\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    if (this.isLoggedIn()) {\n      window.location = window.mainAppPage;\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: this.isLoggedIn() ? ' ' : ' hidden',\n        children: \"Successfully logged in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lContainer\" + (this.isLoggedIn() ? ' hidden' : ' '),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lItem\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loginForm\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: this.handleSubmit,\n              className: \"login-form\",\n              children: [/*#__PURE__*/_jsxDEV(FormItem, {\n                children: getFieldDecorator(\"userName\", {\n                  rules: [{\n                    required: true,\n                    message: \"Please enter your username\"\n                  }]\n                })( /*#__PURE__*/_jsxDEV(Input, {\n                  prefix: /*#__PURE__*/_jsxDEV(Icon, {\n                    type: \"user\",\n                    style: {\n                      color: \"rgba(0,0,0,.25)\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 29\n                  }, this),\n                  placeholder: \"Username\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 19\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormItem, {\n                children: getFieldDecorator(\"password\", {\n                  rules: [{\n                    required: true,\n                    message: \"Please enter your Password\"\n                  }]\n                })( /*#__PURE__*/_jsxDEV(Input, {\n                  prefix: /*#__PURE__*/_jsxDEV(Icon, {\n                    type: \"lock\",\n                    style: {\n                      color: \"rgba(0,0,0,.25)\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 29\n                  }, this),\n                  type: \"password\",\n                  placeholder: \"Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 19\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormItem, {\n                children: [getFieldDecorator(\"remember\", {\n                  valuePropName: \"checked\",\n                  initialValue: true\n                })( /*#__PURE__*/_jsxDEV(Checkbox, {\n                  children: \"Remember me\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 20\n                }, this)), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  htmlType: \"submit\",\n                  className: \"login-form-button\",\n                  children: \"Log in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"footer\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"\",\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"footerLink\",\n            children: \"Powered by React\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n}\nconst Login = Form.create()(NormalLoginForm);\nexport default Login;","map":{"version":3,"names":["React","Component","axios","Form","Icon","Input","Button","Checkbox","message","jsxDEV","_jsxDEV","FormItem","Item","NormalLoginForm","constructor","arguments","isLoggedIn","window","loggedUsername","handleSubmit","e","preventDefault","props","form","validateFields","err","values","details","sysparm_type","remember_me","remember","user_name","userName","user_password","password","get_redirect_url","sysparm_goto_url","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","method","url","data","config","headers","then","response","status","error","success","setTimeout","location","mainAppPage","warning","catch","render","getFieldDecorator","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","rules","required","prefix","type","style","color","placeholder","valuePropName","initialValue","htmlType","href","target","rel","Login","create"],"sources":["/Users/chanasornsringoen/Desktop/CSC105/Assignment/Project/thaithai/src/pages/Login.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport './Login.css';\nimport axios from \"axios\";\nimport { Form, Icon, Input, Button, Checkbox, message } from \"antd\";\nconst FormItem = Form.Item;\n\nclass NormalLoginForm extends Component {\n  \n  isLoggedIn = () => {\n    // window.loggedUsername should be defined by UI page / jelly script\n    // if it's 'guest' that means there is no active user session\n    if (window.loggedUsername==='guest') {\n      return false;\n    } else {\n      return true; // set it to false for local development to prevent passing through\n    }\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        var details = {\n          sysparm_type: \"login\",\n          \"ni.nolog.user_password\": true,\n          remember_me: values.remember,\n          user_name: values.userName,\n          user_password: values.password,\n          get_redirect_url: true,\n          sysparm_goto_url: \"navpage.do\"\n        };\n\n        var formBody = [];\n        for (var property in details) {\n          var encodedKey = encodeURIComponent(property);\n          var encodedValue = encodeURIComponent(details[property]);\n          formBody.push(encodedKey + \"=\" + encodedValue);\n        }\n        formBody = formBody.join(\"&\");\n        axios({\n          method: \"post\",\n          url:\n            \"angular.do?sysparm_type=view_form.login\",\n          data: formBody,\n          config: {\n            headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" }\n          }\n        })\n          .then(function(response) {\n            if (response.data.status==='error') {\n              message.error(response.data.message)\n            } else if (response.data.status==='success'){\n              message.success(response.data.message)\n              setTimeout(()=>{window.location = window.mainAppPage;},500);\n            } else {\n              message.warning('Unknown response status'+response.data.message)\n            }\n          })\n          .catch(function(response) {\n            message.error('Network error. Cannot log in.')\n          });\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    if (this.isLoggedIn()) {\n      window.location = window.mainAppPage;\n    }\n    return (\n      <div>\n      <div className={this.isLoggedIn() ? ' ' : ' hidden'}>\n        Successfully logged in...\n      </div>\n      <div className={\"lContainer\"+(this.isLoggedIn() ? ' hidden' : ' ')}>\n      <div className=\"lItem\">\n          <div className=\"loginForm\">\n            <h2>Login</h2>\n              <Form onSubmit={this.handleSubmit} className=\"login-form\">\n              <FormItem>\n                {getFieldDecorator(\"userName\", {\n                  rules: [{ required: true, message: \"Please enter your username\" }]\n                })(\n                  <Input\n                    prefix={<Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                    placeholder=\"Username\"\n                  />\n                )}\n              </FormItem>\n              <FormItem>\n                {getFieldDecorator(\"password\", {\n                  rules: [{ required: true, message: \"Please enter your Password\" }]\n                })(\n                  <Input\n                    prefix={<Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                    type=\"password\"\n                    placeholder=\"Password\"\n                  />\n                )}\n              </FormItem>\n              <FormItem>\n                {getFieldDecorator(\"remember\", {\n                  valuePropName: \"checked\",\n                  initialValue: true\n                })(<Checkbox>Remember me</Checkbox>)}\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  className=\"login-form-button\"\n                >\n                  Log in\n                </Button>\n              </FormItem>\n            </Form>\n          </div>\n      </div>\n      <div className=\"footer\">\n        <a href=\"\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"footerLink\">Powered by React</a>\n      </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nconst Login = Form.create()(NormalLoginForm);\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}